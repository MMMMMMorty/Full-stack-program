(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(27)},25:function(e,n,t){},27:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(8),l=t.n(o),u=t(11),c=t(3),i=t(29),m="/api/persons",s={getAll:function(){return i.a.get(m)},deletePerson:function(e){return i.a.delete("".concat(m,"/").concat(e))},updataPerson:function(e,n){return i.a.put("".concat(m,"/").concat(e),n)},addPerson:function(e){return i.a.post(m,e)}},d=(t(25),function(e){var n=e.showPerson;return r.a.createElement(r.a.Fragment,null,n)}),f=function(e){var n=e.message;return null===n||""===n?null:r.a.createElement("div",{className:"message"},n)},b=function(e){var n=e.message;return null===n||""===n?null:r.a.createElement("div",{className:"error"},n)},h=function(e){var n=e.newfilter,t=e.onChangeFilterhandler;return r.a.createElement("form",null,r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:n,onChange:t})))},p=function(e){var n=e.newName,t=e.onChangeNamehandler,a=e.newNumber,o=e.onNumberChangehandler,l=e.onClickHandler;return r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:t})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:l},"add")))},g=function(){Object(a.useEffect)(function(){s.getAll().then(function(e){o(e.data)})},[]);var e=Object(a.useState)([{name:"",number:"",id:0}]),n=Object(c.a)(e,2),t=n[0],o=n[1],l=Object(a.useState)(""),i=Object(c.a)(l,2),m=i[0],g=i[1],v=Object(a.useState)(""),E=Object(c.a)(v,2),w=E[0],j=E[1],C=Object(a.useState)(""),O=Object(c.a)(C,2),k=O[0],N=O[1],P=Object(a.useState)(""),y=Object(c.a)(P,2),S=y[0],D=y[1],F=Object(a.useState)(""),T=Object(c.a)(F,2),A=T[0],H=T[1],I=function(e,n){window.confirm("delete ".concat(n.name,"?"))&&(s.deletePerson(n.id).then(function(t){o(e.filter(function(e){return e.id!==n.id})),console.log(t)}),console.log(n.id))},J=t.filter(function(e){return e.name.includes(k)}),x=k.length>0?J.map(function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return I(J,e)}},"delete"))}):t.map(function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return I(t,e)}},"delete"))});return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(f,{message:S}),r.a.createElement(b,{message:A}),r.a.createElement(h,{newfilter:k,onChangeFilterhandler:function(e){N(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(p,{newName:m,onChangeNamehandler:function(e){e.preventDefault(),g(e.target.value)},newNumber:w,onNumberChangehandler:function(e){e.preventDefault(),j(e.target.value)},onClickHandler:function(e){e.preventDefault();var n=t.find(function(e){return e.name===m});if(n){if(window.confirm("".concat(m," is added to phonebook, replace the old number with new one?"))){var a=Object(u.a)({},n,{number:w});s.updataPerson(n.id,a).then(function(e){console.log(e.data),o(t.map(function(t){return t.id!==n.id?t:e.data}))}).catch(function(e){400==e.response.status?(H(e.response.data.error),setTimeout(function(){return H(null)},5e3),console.log(e.response.data.error)):404==e.response.status?(H("Information of ".concat(n.name," has already been removed from server")),setTimeout(function(){return H(null)},5e3),o(t.filter(function(e){return e.id!==n.id}))):console.log(e)})}g(""),j("")}else s.addPerson({name:m,number:w}).then(function(e){console.log(e.data),o(t.concat(e.data)),D("".concat(m," is already added to phonebook")),setTimeout(function(){return D(null)},5e3),g(""),j("")}).catch(function(e){console.log(e.response.data.error),H(e.response.data.error)})}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(d,{showPerson:x}))};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(g,null))}},[[12,2,1]]]);
//# sourceMappingURL=main.82b71cec.chunk.js.map